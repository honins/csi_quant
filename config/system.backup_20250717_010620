# =============================================================================
# 中证500指数相对低点识别系统 - 核心配置文件
# =============================================================================
# 说明：此文件包含系统运行的基本配置，优化相关参数请参考 strategy.yaml
# 建议：首次使用保持默认值，熟悉系统后再进行调整
# 最后更新：2025年
# =============================================================================

# =============================================================================
# AI人工智能模块配置
# =============================================================================
ai:
  enable: true                    # 是否启用AI模块（强烈建议保持true）
  model_type: machine_learning    # AI模型类型：machine_learning（机器学习）
  model_save_path: models/ai_model.pkl  # AI模型保存路径
  models_dir: models              # 模型文件夹路径
  
  # 模型重训练控制参数
  retrain_interval_days: 30       # 模型重新训练间隔天数
                                  # 建议值：30天（平衡准确性和效率）
                                  # 调小值：提高准确性但增加计算成本
                                  # 调大值：提高效率但可能降低准确性
  
  enable_model_reuse: true        # 是否启用模型复用
                                  # true：复用已训练模型，提高效率
                                  # false：每次重新训练，确保最新但耗时
  
  # 训练数据时间范围配置
  training_data:
    full_train_years: 6           # 完全重训练使用的历史数据年数
                                  # 建议值：6-8年（包含完整市场周期）
                                  # 过小：数据不足，模型泛化能力差
                                  # 过大：训练时间长，可能包含过时信息
    
    optimize_years: 6             # 参数优化模式使用的数据年数
                                  # 建议值：与full_train_years相同
                                  # 用于策略参数调优和模型验证
    
    incremental_years: 1          # 增量训练使用的数据年数
                                  # 建议值：1年（最近的市场数据）
                                  # 用于模型增量更新，保持对新市场的敏感性

# =============================================================================
# 数据源配置
# =============================================================================
data:
  data_file_path: data/SHSE.000905_1d.csv  # 中证500指数数据文件路径
  data_source: akshare             # 数据源：akshare（免费财经数据接口）
  index_code: SHSE.000905          # 指数代码：中证500
  frequency: 1d                    # 数据频率：1d（日线数据）
  history_days: 1000               # 默认获取历史数据天数
                                   # 建议值：1000天（约4年数据）
                                   # 用于技术指标计算和基础分析
  
  cache_enabled: true              # 是否启用数据缓存
                                   # true：缓存数据，提高访问速度
                                   # false：每次重新获取，确保数据最新
  cache_dir: cache                 # 缓存文件夹路径

# =============================================================================
# 交易策略核心配置
# =============================================================================
strategy:
  # 核心策略参数
  rise_threshold: 0.04             # 相对低点涨幅阈值（4%）
                                   # 定义：从识别点开始，未来20天内最高涨幅
                                   # 调高：更严格的低点定义，减少信号但提高质量
                                   # 调低：更宽松的低点定义，增加信号但可能降低质量
  
  max_days: 20                     # 最大持有天数
                                   # 定义：从识别点开始的最长观察期
                                   # 建议值：15-30天（适应不同市场节奏）
  
  results_dir: results             # 结果保存目录
  
  # 技术指标参数配置
  bb_period: 20                    # 布林带周期（天）
                                   # 用途：识别价格波动范围和超买超卖
                                   # 建议值：20天（经典设置）
  
  bb_std: 2                        # 布林带标准差倍数
                                   # 用途：控制布林带宽度
                                   # 建议值：2（标准设置，95%价格包含率）
  
  rsi_period: 14                   # RSI相对强弱指标周期
                                   # 用途：识别超买超卖状态
                                   # 建议值：14天（经典设置）
  
  # MACD指标参数
  macd_fast: 12                    # MACD快线EMA周期
  macd_signal: 9                   # MACD信号线EMA周期
  macd_slow: 26                    # MACD慢线EMA周期
                                   # 用途：趋势跟踪和动量分析
                                   # 建议：保持经典设置(12,26,9)
  
  # 移动平均线周期设置
  ma_periods:                      # 多周期移动平均线
    - 5                            # 短期趋势（1周）
    - 10                           # 中短期趋势（2周）
    - 20                           # 中期趋势（1月）
    - 60                           # 长期趋势（3月）
                                   # 用途：多时间框架趋势分析

# =============================================================================
# 回测系统配置
# =============================================================================
backtest:
  start_date: '2022-01-01'         # 默认回测开始日期
  end_date: '2025-06-21'           # 默认回测结束日期
  default_start_date: '2023-01-01' # 快速回测开始日期
  default_end_date: '2025-06-21'   # 快速回测结束日期
  
  rolling_window: 252              # 滚动窗口大小（交易日）
                                   # 252天≈1年交易日
                                   # 用途：滚动回测的数据窗口
  
  rolling_step: 63                 # 滚动步长（交易日）
                                   # 63天≈3个月
                                   # 用途：控制回测的时间间隔
  
  generate_charts: true            # 是否生成回测图表
  charts_dir: charts               # 图表保存目录

# =============================================================================
# 系统运行配置
# =============================================================================

# 日志系统配置
logging:
  level: INFO                      # 日志级别：DEBUG/INFO/WARNING/ERROR
                                   # INFO：记录重要信息，推荐设置
                                   # DEBUG：详细调试信息，开发时使用
  
  file: logs/system.log            # 日志文件路径
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'  # 日志格式
  max_bytes: 10485760              # 日志文件最大大小（10MB）
  backup_count: 5                  # 保留的日志文件备份数量

# 通知系统配置
notification:
  methods:                         # 通知方式列表
    - console                      # 控制台输出
    - email                        # 邮件通知（需配置邮箱）
  logs_dir: logs                   # 通知日志目录
  
  # 邮件通知配置（可选）
  email:
    sender: quant_system@example.com      # 发送者邮箱
    recipients:                           # 接收者邮箱列表
      - your_email@example.com
    smtp_server: smtp.example.com         # SMTP服务器
    smtp_port: 587                        # SMTP端口
    username: your_username               # 邮箱用户名
    password: your_password               # 邮箱密码或应用密码

# 结果保存配置
results:
  save_path: results               # 主结果保存路径
  save_detailed: true              # 是否保存详细结果
                                   # true：保存完整数据和分析
                                   # false：仅保存核心结果
  images_path: results/images      # 图片保存路径
  tables_path: results/tables      # 数据表格保存路径

# 风险控制配置
risk:
  min_confidence: 0.6              # 最小置信度阈值
                                   # 范围：0.0-1.0，建议0.5-0.8
                                   # 调高：减少信号，提高质量
                                   # 调低：增加信号，可能降低质量
  
  max_daily_signals: 3             # 每日最大信号数量
                                   # 用途：防止过度交易
                                   # 建议值：1-5个
  
  cooldown_days: 5                 # 信号冷却期（天）
                                   # 用途：避免重复信号
                                   # 建议值：3-7天

# 系统模式配置
system:
  mode: backtest                   # 系统运行模式
                                   # backtest：回测模式
                                   # live：实盘模式（开发中）
  log_level: INFO                  # 系统日志级别
  log_file: logs/system.log        # 系统日志文件

# =============================================================================
# 配置文件使用说明
# =============================================================================
# 1. 新手建议：保持所有默认值，先熟悉系统运行
# 2. 调优建议：优先调整 strategy.rise_threshold 和 risk.min_confidence
# 3. 高级调优：参考 strategy.yaml 中的详细参数优化配置
# 4. 数据更新：定期运行 python run.py fetch 更新市场数据
# 5. 模型训练：定期运行 python run.py ai -m optimize 优化模型
# ============================================================================= 