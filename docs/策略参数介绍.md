# 策略参数介绍

本文档详细介绍项目中所有策略参数的作用、影响和配置方法。这些参数控制着相对低点识别算法的各个方面，理解和合理配置这些参数对于系统性能至关重要。

## 参数分类概述

### 参数类型
1. **核心策略参数**：控制基本的交易逻辑
2. **技术指标参数**：控制各技术指标的计算
3. **置信度权重参数**：控制各信号的重要程度
4. **AI优化参数**：控制机器学习模型行为
5. **风险控制参数**：控制风险管理机制
6. **数据处理参数**：控制数据获取和处理

## 一、核心策略参数

### 1.1 基础交易参数

#### rise_threshold (涨幅阈值)
```yaml
rise_threshold: 0.04  # 4%
```
- **作用**：定义相对低点成功的最低涨幅要求
- **影响**：
  - 数值越高：成功标准越严格，成功率可能下降，但成功时收益更高
  - 数值越低：成功标准越宽松，成功率可能提升，但收益期望降低
- **建议范围**：0.02-0.08 (2%-8%)
- **默认值**：0.04 (4%)
- **注意**：这是系统固定参数，不建议修改

#### max_days (最大观察天数)
```yaml
max_days: 20
```
- **作用**：定义观察未来涨幅的最大时间窗口
- **影响**：
  - 数值越大：给价格上涨更多时间，成功率可能提升，但资金效率降低
  - 数值越小：要求更快上涨，资金效率高，但成功率可能下降
- **建议范围**：10-30天
- **默认值**：20天
- **注意**：这是系统固定参数，不建议修改

## 二、技术指标参数

### 2.1 移动平均线参数

#### ma_periods (移动平均线周期)
```yaml
ma_periods: [5, 10, 20, 60]
```
- **作用**：定义计算哪些周期的移动平均线
- **各周期作用**：
  - MA5：短期趋势，反应灵敏
  - MA10：中短期趋势，平滑短期波动
  - MA20：中期趋势，市场主要参考线
  - MA60：长期趋势，重要支撑阻力位
- **影响**：不同周期组合影响趋势判断的精度和时效性
- **可选配置**：[5,10,20,50]、[5,15,30,60]等

### 2.2 RSI参数

#### rsi_period (RSI计算周期)
```yaml
rsi_period: 14
```
- **作用**：定义RSI指标的计算周期
- **影响**：
  - 周期越短：RSI变化越敏感，信号越频繁
  - 周期越长：RSI变化越平稳，信号越稳定
- **建议范围**：10-20
- **常用值**：14（标准值）、9（敏感）、21（稳定）

#### rsi_oversold_threshold (RSI超卖阈值)
```yaml
rsi_oversold_threshold: 30
```
- **作用**：定义RSI超卖的判断标准
- **影响**：
  - 数值越低：超卖标准越严格，信号越少但质量可能更高
  - 数值越高：超卖标准越宽松，信号越多但可能误报增加
- **建议范围**：20-35
- **默认值**：30（经典值）

#### rsi_low_threshold (RSI偏低阈值)
```yaml
rsi_low_threshold: 40
```
- **作用**：定义RSI偏低的判断标准（比超卖条件宽松）
- **影响**：用于提前捕捉可能的超卖信号
- **建议范围**：35-50

### 2.3 MACD参数

#### macd_fast (MACD快线周期)
```yaml
macd_fast: 12
```
- **作用**：MACD指标中快速EMA的周期
- **影响**：
  - 周期越短：MACD变化越敏感，信号越及时
  - 周期越长：MACD变化越稳定，噪声越少

#### macd_slow (MACD慢线周期)
```yaml
macd_slow: 26
```
- **作用**：MACD指标中慢速EMA的周期
- **影响**：与快线周期差距影响MACD的敏感度

#### macd_signal (MACD信号线周期)
```yaml
macd_signal: 9
```
- **作用**：MACD信号线的EMA平滑周期
- **影响**：影响MACD金叉死叉信号的敏感度

### 2.4 布林带参数

#### bb_period (布林带周期)
```yaml
bb_period: 20
```
- **作用**：布林带中轨（移动平均线）的计算周期
- **影响**：
  - 周期越短：布林带变化越敏感，上下轨更贴近价格
  - 周期越长：布林带变化越稳定，上下轨变化更平缓

#### bb_std (布林带标准差倍数)
```yaml
bb_std: 2
```
- **作用**：布林带上下轨相对中轨的标准差倍数
- **影响**：
  - 倍数越大：布林带越宽，价格触及上下轨的频率越低
  - 倍数越小：布林带越窄，价格触及上下轨的频率越高
- **常用值**：1.5（敏感）、2（标准）、2.5（保守）

## 三、置信度权重参数

### 3.1 移动平均线权重

#### ma_all_below (价格跌破所有均线权重)
```yaml
ma_all_below: 0.3
```
- **作用**：当价格跌破所有移动平均线时的置信度权重
- **影响**：
  - 权重越高：该条件对最终判断影响越大
  - 权重越低：该条件对最终判断影响越小
- **建议范围**：0.2-0.4
- **重要性**：★★★★★（核心指标）

#### ma_partial_below (价格跌破部分均线权重)
```yaml
ma_partial_below: 0.2
```
- **作用**：当价格跌破部分均线时的置信度权重
- **影响**：为完全跌破均线前的早期信号提供支持
- **建议范围**：0.1-0.3

### 3.2 技术指标权重

#### rsi_oversold (RSI超卖权重)
```yaml
rsi_oversold: 0.3
```
- **作用**：RSI达到超卖水平时的置信度权重
- **影响**：控制RSI超卖信号的重要程度
- **建议范围**：0.2-0.4
- **重要性**：★★★★☆

#### rsi_low (RSI偏低权重)
```yaml
rsi_low: 0.2
```
- **作用**：RSI处于偏低水平时的置信度权重
- **影响**：为RSI超卖的早期预警信号
- **建议范围**：0.1-0.3

#### macd_negative (MACD负值权重)
```yaml
macd_negative: 0.1
```
- **作用**：MACD处于负值时的置信度权重
- **影响**：反映价格动量的弱势状态
- **建议范围**：0.05-0.15

#### bb_lower_near (布林带下轨权重)
```yaml
bb_lower_near: 0.2
```
- **作用**：价格接近布林带下轨时的置信度权重
- **影响**：利用布林带的统计特性判断价格极值
- **建议范围**：0.15-0.25
- **重要性**：★★★☆☆

### 3.3 价格动量权重

#### recent_decline (近期下跌权重)
```yaml
recent_decline: 0.2
```
- **作用**：近期出现大幅下跌时的置信度权重
- **影响**：捕捉短期超跌反弹机会
- **建议范围**：0.1-0.3

#### volume_panic_bonus (恐慌性抛售奖励)
```yaml
volume_panic_bonus: 0.1
```
- **作用**：出现恐慌性大量抛售时的额外置信度
- **影响**：识别可能的恐慌性抛售见底信号
- **建议范围**：0.05-0.15

#### volume_surge_bonus (温和放量奖励)
```yaml
volume_surge_bonus: 0.05
```
- **作用**：出现温和放量时的额外置信度
- **影响**：识别市场关注度提升
- **建议范围**：0.02-0.08

### 3.4 动态调整权重

#### dynamic_confidence_adjustment (动态置信度调整)
```yaml
dynamic_confidence_adjustment: 0.05
```
- **作用**：根据市场波动率动态调整置信度的幅度
- **影响**：
  - 高波动期：降低置信度要求，增加交易机会
  - 低波动期：提高置信度要求，减少误报
- **建议范围**：0.05-0.25
- **重要性**：★★★★☆

#### market_sentiment_weight (市场情绪权重)
```yaml
market_sentiment_weight: 0.16
```
- **作用**：基于成交量变化判断市场情绪的权重
- **影响**：捕捉市场情绪的极端变化
- **建议范围**：0.08-0.25

#### trend_strength_weight (趋势强度权重)
```yaml
trend_strength_weight: 0.16
```
- **作用**：基于价格趋势强度调整的权重
- **影响**：在强下跌趋势中增加相对低点概率
- **建议范围**：0.06-0.20

### 3.5 成交量分析权重

#### volume_weight (成交量权重)
```yaml
volume_weight: 0.25
```
- **作用**：成交量分析在整体判断中的权重
- **影响**：控制成交量因素的整体重要性
- **建议范围**：0.15-0.35
- **重要性**：★★★★☆

#### price_momentum_weight (价格动量权重)
```yaml
price_momentum_weight: 0.2
```
- **作用**：价格动量分析的权重
- **影响**：平衡价格趋势和动量因素
- **建议范围**：0.12-0.30

## 四、成交量分析参数

### 4.1 成交量阈值

#### volume_panic_threshold (恐慌性抛售阈值)
```yaml
volume_panic_threshold: 1.4
```
- **作用**：判断恐慌性抛售的成交量放大倍数
- **影响**：
  - 阈值越高：恐慌性抛售标准越严格
  - 阈值越低：更容易触发恐慌性抛售判断
- **建议范围**：1.2-2.0

#### volume_surge_threshold (温和放量阈值)
```yaml
volume_surge_threshold: 1.2
```
- **作用**：判断温和放量的成交量放大倍数
- **影响**：控制放量信号的敏感度
- **建议范围**：1.1-1.5

#### volume_shrink_threshold (成交量萎缩阈值)
```yaml
volume_shrink_threshold: 0.8
```
- **作用**：判断成交量萎缩的缩小倍数
- **影响**：识别市场观望情绪
- **建议范围**：0.6-0.9

### 4.2 价格变化阈值

#### price_decline_threshold (价格下跌阈值)
```yaml
price_decline_threshold: -0.02
```
- **作用**：定义显著价格下跌的幅度
- **影响**：配合成交量分析判断市场状态
- **建议范围**：-0.05 到 -0.01

#### decline_threshold (近期下跌阈值)
```yaml
decline_threshold: -0.05
```
- **作用**：定义近期大幅下跌的判断标准
- **影响**：识别短期超跌情况
- **建议范围**：-0.08 到 -0.03

## 五、风险控制参数

### 5.1 置信度控制

#### final_threshold (最终置信度阈值)
```yaml
final_threshold: 0.5
```
- **作用**：判断为相对低点的最低置信度要求
- **影响**：
  - 阈值越高：预测越保守，信号越少但质量可能更高
  - 阈值越低：预测越激进，信号越多但可能误报增加
- **建议范围**：0.4-0.7
- **重要性**：★★★★★（核心参数）

#### min_confidence (最小置信度)
```yaml
min_confidence: 0.6
```
- **作用**：系统接受预测的最低置信度要求
- **影响**：额外的安全层，确保预测质量
- **建议范围**：0.5-0.8

### 5.2 交易频率控制

#### max_daily_signals (每日最大信号数)
```yaml
max_daily_signals: 3
```
- **作用**：限制每日最大交易信号数量
- **影响**：
  - 数值越大：允许更多交易机会，但可能增加风险
  - 数值越小：限制交易频率，降低风险但可能错过机会
- **建议范围**：1-5

#### cooldown_days (信号冷却期)
```yaml
cooldown_days: 5
```
- **作用**：两次信号之间的最小间隔天数
- **影响**：
  - 天数越长：交易频率越低，避免频繁交易
  - 天数越短：允许更频繁的交易机会
- **建议范围**：3-10天

## 六、AI优化参数

### 6.1 模型训练参数

#### model_type (模型类型)
```yaml
model_type: "machine_learning"
```
- **作用**：指定使用的AI模型类型
- **可选值**：
  - "machine_learning"：机器学习模型（默认）
  - "deep_learning"：深度学习模型（未来扩展）

#### train_test_split_ratio (训练测试分割比例)
```yaml
train_test_split_ratio: 0.8
```
- **作用**：数据分割中训练集的比例
- **影响**：
  - 比例越高：更多数据用于训练，但验证数据减少
  - 比例越低：更多数据用于验证，但训练数据减少
- **建议范围**：0.7-0.85

### 6.2 优化算法参数

#### bayesian_optimization (贝叶斯优化参数)
```yaml
bayesian_optimization:
  n_calls: 100              # 最大评估次数
  n_initial_points: 20      # 初始随机点数
  acq_func: "EI"           # 采集函数
  xi: 0.01                 # 探索参数
  kappa: 1.96              # UCB参数
```

- **n_calls**：控制优化迭代次数，影响优化质量和时间
- **n_initial_points**：初始随机采样点数，影响优化起始质量
- **acq_func**：采集函数类型，影响搜索策略
- **xi**：探索/利用平衡参数
- **kappa**：UCB采集函数的置信参数

#### genetic_algorithm (遗传算法参数)
```yaml
genetic_algorithm:
  population_size: 20       # 种群大小
  generations: 10           # 进化代数
  crossover_rate: 0.8       # 交叉概率
  mutation_rate: 0.1        # 变异概率
```

- **population_size**：影响搜索多样性和计算成本
- **generations**：影响优化深度和时间成本
- **crossover_rate**：控制信息交换程度
- **mutation_rate**：控制搜索多样性

## 七、数据处理参数

### 7.1 数据源配置

#### data_source (数据源)
```yaml
data_source: "akshare"
```
- **作用**：指定数据获取来源
- **可选值**：akshare、yfinance等

#### index_code (指数代码)
```yaml
index_code: "SHSE.000905"
```
- **作用**：指定要分析的指数
- **常用值**：
  - SHSE.000905：中证500指数
  - SHSE.000852：中证1000指数

#### frequency (数据频率)
```yaml
frequency: "1d"
```
- **作用**：指定数据的时间频率
- **可选值**：1d（日线）、1h（小时线）等

### 7.2 缓存配置

#### cache_enabled (启用缓存)
```yaml
cache_enabled: true
```
- **作用**：是否启用数据缓存
- **影响**：提高数据访问速度，减少网络请求

#### history_days (历史数据天数)
```yaml
history_days: 1000
```
- **作用**：获取历史数据的天数
- **影响**：
  - 天数越多：数据越全面，但获取时间越长
  - 天数越少：获取速度快，但数据可能不足

## 八、参数优化建议

### 8.1 参数调优顺序

1. **核心权重参数**：先调整main_all_below、rsi_oversold等核心权重
2. **阈值参数**：再调整final_threshold、各种阈值参数
3. **技术指标参数**：最后微调技术指标的计算参数
4. **风险控制参数**：根据风险偏好调整风险控制参数

### 8.2 参数组合建议

#### 保守型配置
```yaml
final_threshold: 0.6        # 提高置信度要求
ma_all_below: 0.4          # 增加均线权重
rsi_oversold: 0.3          # 重视RSI信号
max_daily_signals: 2       # 限制交易频率
cooldown_days: 7           # 增加冷却期
```

#### 激进型配置
```yaml
final_threshold: 0.45       # 降低置信度要求
dynamic_confidence_adjustment: 0.15  # 增加动态调整
volume_weight: 0.3         # 增加成交量权重
max_daily_signals: 5       # 允许更多信号
cooldown_days: 3           # 减少冷却期
```

#### 平衡型配置（默认）
```yaml
final_threshold: 0.5        # 中等置信度要求
ma_all_below: 0.3          # 平衡的权重分配
rsi_oversold: 0.3
volume_weight: 0.25
max_daily_signals: 3       # 适中的交易频率
cooldown_days: 5
```

### 8.3 参数验证方法

1. **历史回测验证**：使用历史数据验证参数效果
2. **样本外测试**：在未用于优化的数据上测试
3. **敏感性分析**：分析参数变化对结果的影响
4. **稳定性测试**：测试参数在不同市场环境下的表现

## 九、参数修改影响分析

### 9.1 成功率影响

**提高成功率的参数调整**：
- 提高final_threshold（更严格的判断标准）
- 增加ma_all_below权重（重视趋势信号）
- 增加rsi_oversold权重（重视超卖信号）
- 降低volume_panic_threshold（更容易识别恐慌抛售）

**可能降低成功率的调整**：
- 降低final_threshold（更宽松的判断标准）
- 过度依赖单一指标权重
- 忽略成交量分析

### 9.2 交易频率影响

**增加交易频率的调整**：
- 降低final_threshold
- 增加max_daily_signals
- 减少cooldown_days
- 增加dynamic_confidence_adjustment

**减少交易频率的调整**：
- 提高final_threshold
- 减少max_daily_signals
- 增加cooldown_days
- 提高各种阈值参数

### 9.3 风险收益平衡

**提高收益潜力的调整**：
- 适当降低final_threshold（增加交易机会）
- 增加volume_weight（捕捉成交量信号）
- 优化dynamic_confidence_adjustment

**降低风险的调整**：
- 提高final_threshold
- 增加cooldown_days
- 设置较低的max_daily_signals
- 提高min_confidence

## 总结

参数配置是策略成功的关键因素。建议从默认配置开始，通过历史回测逐步优化参数。重点关注核心权重参数和风险控制参数，避免过度优化导致的过拟合问题。定期评估参数在不同市场环境下的表现，必要时进行调整。 